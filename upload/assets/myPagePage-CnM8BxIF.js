import{w as b}from "./with-props-JNWkkrjn.js";import{a as y,p as j}from "./chunk-D4RADZKF-DdSvw7tX.js";import{j as t}from "./jsx-runtime-D_zvdyIk.js";import{u as v}from "./useQuery-CxabGwVz.js";import{b as C,c as w,d as B,e as P,f as N,g as k,h as S,i as F,j as L,k as M,l as T,m as U,n as H,o as O}from "./index-DJdx2QAc.js";import{G as d}from "./iconBase-CtWej6xm.js";import{u as f}from "./useMutation-iBKtBQ4J.js";import{S as r}from "./sweetalert2.esm.all-9Qm2jZ7z.js";/* empty css                   */import{s as E,g as I}from "./myPageAPI-BH0myYQf.js";import{u as g}from "./useTranslation-DnilsLqi.js";/* empty css                         */import{B as A}from "./bottomNavComponent-Bso_MVxF.js";import{g as K}from "./reviewAPI-zRekXALF.js";import{g as R}from "./pointsAPI-Cz9Sup82.js";import{c as q}from "./productsAPI-NkJZ08PW.js";import{g as G}from "./barcodeAPI-jCDD8Npe.js";import{U as W,E as z}from "./errorComponent-BZQ7Dmt3.js";import"./useBaseQuery-BTSvK_Q6.js";import"./removable-CGh8wCEh.js";import"./query-CjmfnAM3.js";import"./QueryClientProvider--V26__jT.js";import"./mutation-CruqbX-z.js";import"./axiosInstance-CCaw23o5.js";import"./index-xsH4HHeE.js";import"./i18nInstance-CHFDjdcJ.js";import"./createLucideIcon-Cyt6UY_L.js";import"./index-Druiat5n.js";function V(e){return d({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m478.33 433.6-90-218a22 22 0 0 0-40.67 0l-90 218a22 22 0 1 0 40.67 16.79L316.66 406h102.67l18.33 44.39A22 22 0 0 0 458 464a22 22 0 0 0 20.32-30.4zM334.83 362 368 281.65 401.17 362zm-66.99-19.08a22 22 0 0 0-4.89-30.7c-.2-.15-15-11.13-36.49-34.73 39.65-53.68 62.11-114.75 71.27-143.49H330a22 22 0 0 0 0-44H214V70a22 22 0 0 0-44 0v20H54a22 22 0 0 0 0 44h197.25c-9.52 26.95-27.05 69.5-53.79 108.36-31.41-41.68-43.08-68.65-43.17-68.87a22 22 0 0 0-40.58 17c.58 1.38 14.55 34.23 52.86 83.93.92 1.19 1.83 2.35 2.74 3.51-39.24 44.35-77.74 71.86-93.85 80.74a22 22 0 1 0 21.07 38.63c2.16-1.18 48.6-26.89 101.63-85.59 22.52 24.08 38 35.44 38.93 36.1a22 22 0 0 0 30.75-4.9z"},child:[]}]})(e)}function Q(e){return d({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M304 336v40a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V136a40 40 0 0 1 40-40h152c22.09 0 48 17.91 48 40v40m64 160 80-80-80-80m-192 80h256"},child:[]}]})(e)}function J(){const{t:e}=g(),o=f({mutationFn:E,onSuccess:()=>{r.fire({title:e("deletingUserSuccess"),icon:"success",confirmButtonText:e("confirmOKButtonText"),customClass:{popup:"custom-popup",title:"custom-title",actions:"custom-actions",confirmButton:"custom-confirm-button"}}).then(()=>{window.location.href="/logout"})},onError:()=>{r.fire({title:e("deletingUserFail"),icon:"error",confirmButtonText:e("confirmOKButtonText"),customClass:{popup:"custom-popup",title:"custom-title",actions:"custom-actions",confirmButton:"custom-confirm-button"}})}});return{openDeleteModal:()=>{r.fire({title:e("deletingUserConfirm"),text:e("deletingUserWarning"),icon:"warning",showCancelButton:!0,confirmButtonText:e("confirmDeleteButtonText"),cancelButtonText:e("cancelButtonText"),customClass:{popup:"custom-popup",title:"custom-title",actions:"custom-actions",confirmButton:"custom-confirm-button",cancelButton:"custom-cancel-button"}}).then(i=>{i.isConfirmed&&o.mutate()})}}}function $(){const{i18n:e,t:o}=g(),[s,i]=y.useState(""),c={ko:"한국어 (KR)",ja:"日本語 (JP)",en:"English (US)"},p=f({mutationFn:async()=>{await e.changeLanguage(s||"en")},onSuccess:()=>{r.fire({title:o("languageSelectGuide"),text:o("languageChangeSuccess"),icon:"success",confirmButtonText:"OK",customClass:{popup:"custom-popup",title:"custom-title",actions:"custom-actions",confirmButton:"custom-confirm-button"}})}});return{openLanguageModal:async()=>{const l=Object.entries(c).reduce((a, [u,m])=>(a[u]=m,a),{}),{value:n}=await r.fire({title:o("languageSelectGuide"),input:"radio",inputOptions:l,inputValidator: a=>a?null:o("selectLanguageConfirm"),showCancelButton:!0,confirmButtonText:o("confirmOKButtonText"),cancelButtonText:o("cancelButtonText"),customClass:{popup:"custom-popup",title:"custom-title",actions:"custom-actions",confirmButton:"custom-confirm-button",cancelButton:"custom-cancel-button"},buttonsStyling:!1});n&&(i(n),p.mutate())}}}function D({myData:e}){var l;const{t:o}=g(),s=j(),{openDeleteModal:i}=J(),{openLanguageModal:c}=$(),p=[{icon:t.jsx(C,{className:"text-pink-500 text-2xl mb-2"}),label:o("myPageWishlistItems"),value:e.wishlistCount,to:"/mypage/favorites"},{icon:t.jsx(w,{className:"text-blue-500 text-2xl mb-2"}),label:o("myPageMyReviews"),value:e.reviewCount,to:"/reviews/user"},{icon:t.jsx(B,{className:"text-yellow-500 text-2xl mb-2"}),label:o("myPageCoupons"),value:e.couponCount,to:"/mypage/coupons"},{icon:t.jsx(P,{className:"text-green-500 text-2xl mb-2"}),label:o("myPageBarcodeHistory"),value:e.barcodeHistoryCount,to:"/barcode/history"}],x=[{icon:V,label:o("myPageLanguageSettings"),onClick:c},{icon:N,label:o("myPageSupport"),to:"/inquiries/list"},{icon:k,label:o("myPageNotifications"),to:""},{icon:S,label:o("myPagePrivacyPolicy"),to:""},{icon:F,label:o("myPageTermsOfService"),to:""},{icon:L,label:o("myPageLicenses"),to:""},{icon:M,label:o("myPageDeleteAccount"),onClick:i},{icon:Q,label:o("myPageLogout"),to:"/logout"}];return t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"relative mb-8",children:[t.jsx("div",{className:"bg-gradient-to-r from-yellow-200 to-green-300 h-40 rounded-xl relative"}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"relative inline-block -mt-16",children:t.jsx("img",{src:`https://myapp.peek-pick.click/users/${e.profileImgUrl}`,alt:"Profile",className:"w-28 h-28 rounded-full border-4 border-white bg-white object-cover"})}),t.jsx("h3",{className:"mt-4 mb-1 text-xl font-semibold",children:e.nickname}),t.jsx("div",{className:"flex justify-center mb-2",children:t.jsxs("button",{onClick:()=>s("/mypage/points/history"),className:"rounded flex items-center justify-center space-x-2 px-4 py-2 hover:bg-gray-100",children:[t.jsx(T,{className:"text-indigo-500 text-xl"}),t.jsxs("p",{className:"text-gray-500",children:[((l=e==null?void 0:e.point)==null?void 0:l.toLocaleString())??"0"," Beeplet"]}),t.jsx(U,{className:"text-gray-500 text-xl"})]})}),t.jsxs("div",{className:"flex justify-center gap-2",children:[t.jsxs("button",{onClick:()=>s("/points/store/list"),className:"border border-amber-300 text-amber-300 px-4 py-1 flex items-center hover:bg-gray-100",children:[t.jsx(H,{className:"mr-2"})," ",o("myPagePointStore")]}),t.jsxs("button",{onClick:()=>s("/mypage/edit"),className:"bg-amber-300 hover:bg-amber-400 active:bg-amber-200 text-white px-4 py-1 rounded flex items-center",children:[t.jsx(O,{className:"mr-2"})," ",o("myPageEditProfile")]})]})]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 px-4 mb-6",children:p.map((n, a)=>t.jsxs("button",{onClick:()=>s(n.to),className:"bg-white shadow hover:shadow-md transition rounded-xl p-4 flex flex-col items-center text-center w-full",children:[n.icon,t.jsx("span",{className:"text-lg font-semibold text-gray-800",children:n.value}),t.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:n.label})]},a))}),t.jsx("div",{className:"p-4 space-y-2",children:x.map(({icon:n,label:a,to:u,onClick:m}, h)=>t.jsxs("button",{onClick:()=>{m?m():u&&s(u)},className:"w-full flex items-center px-4 py-3 rounded-lg hover:bg-gray-100 text-gray-600 text-base",children:[t.jsx(n,{className:"mr-2"}),t.jsx("span",{children:a})]},h))})]})}function X(){return v({queryKey:["myPageData"],queryFn:async()=>{const[e,o,s,i,c]=await Promise.all([I(),K(),R(),G(),q()]);return{profileImgUrl:e.profileImgUrl,nickname:e.nickname,point:e.point,reviewCount:o,couponCount:s,barcodeHistoryCount:i,wishlistCount:c,...e.quickStats}}})}function Y(){const{data:e,isLoading:o,isError:s}=X();return o?t.jsx(W,{}):s||!e?t.jsx(z,{}):t.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-2xl shadow relative space-y-4",children:[t.jsx(D,{myData:e}),t.jsx(A,{})]})}const Nt=b(Y);export{Nt as default};
