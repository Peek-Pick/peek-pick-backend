import{w as f}from "./with-props-JNWkkrjn.js";import{w as h}from "./chunk-D4RADZKF-DdSvw7tX.js";import{j as e}from "./jsx-runtime-D_zvdyIk.js";import{u as j}from "./QueryClientProvider--V26__jT.js";import{u as b}from "./useMutation-iBKtBQ4J.js";import{t as y,i as N}from "./reviewAPI-zRekXALF.js";import{u as k}from "./useReviewReport-CWkDotFm.js";import{R as w}from "./rating-s5hnHQfB.js";import{R as v}from "./reviewLoading-C78wslp8.js";import{u as R,F as L}from "./floatingHearts-Bwxc8ijh.js";import{B as C}from "./FloatingActionButtons-3zuONfQ9.js";import{u as x}from "./useTranslation-DnilsLqi.js";import{u as I}from "./useQuery-CxabGwVz.js";import"./mutation-CruqbX-z.js";import"./removable-CGh8wCEh.js";import"./axiosInstance-CCaw23o5.js";import"./index-xsH4HHeE.js";import"./sweetalert2.esm.all-9Qm2jZ7z.js";/* empty css                         */import"./index-Druiat5n.js";import"./createLucideIcon-Cyt6UY_L.js";import"./i18nInstance-CHFDjdcJ.js";import"./useBaseQuery-BTSvK_Q6.js";import"./query-CjmfnAM3.js";function D({review:t,isLoading:a,isError:o}){var n,d;const{t:r}=x(),i=j(),{openReportModal:m}=k(t==null?void 0:t.reviewId),l=b({mutationFn: s=>y(s),onSuccess:()=>{i.invalidateQueries({queryKey:["review",t.reviewId]}).then()},onError: s=>{console.error("toggleLikeMutation failed: ",s)}}),{handleLikeClick:p,containerRef:u,hearts:g}=R(l.mutate,t);return a?e.jsx(v,{}):o||!t?e.jsx("p",{className:"text-center p-4 text-red-500 text-base sm:text-lg",children:r("reviewLoadError")}):e.jsx("div",{children:e.jsx("section",{className:"relative",ref:u,children:e.jsxs("div",{className:"w-full max-w-7xl md:px-5 lg-6 mx-auto",children:[e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-md mb-2",children:[e.jsxs("div",{className:"flex sm:items-center flex-col min-[400px]:flex-row justify-between gap-4 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:`https://myapp.peek-pick.click/users/${t.profileImageUrl}`,className:"w-14 h-14 rounded-full object-cover",alt:"profile image"}),e.jsx("h6",{className:"font-semibold text-md sm:text-base leading-2 text-gray-600",children:t.nickname??"User"})]}),e.jsxs("p",{className:"font-normal text-sm sm:text-sm leading-8 text-gray-400",children:[r("postedOn")," ",new Date(t.regDate).toLocaleDateString()]})]}),e.jsx("div",{className:"flex items-center gap-2 mb-4",children:Array.from({length:5}).map((s, c)=>e.jsx(w,{filled:c<t.score},c))}),e.jsx("p",{className:"font-normal text-sm sm:text-sm leading-6 text-gray-600 max-xl:text-justify mb-2",style:{whiteSpace:"pre-line"},children:t.comment}),((n=t.images)==null?void 0:n.length)>0&&e.jsx("div",{className:"flex flex-nowrap space-x-2 mb-4 overflow-x-auto no-scrollbar",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:t.images.map(s=>e.jsx("img",{src:`https://myapp.peek-pick.click/reviews/s_${s.imgUrl}`,alt:"Review Image",className:"w-25 h-25 sm:w-25 sm:h-25 rounded-lg object-cover flex-shrink-0 border-1 border-gray-300 "},s.imgId))}),((d=t.tagList)==null?void 0:d.length)>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:t.tagList.map(s=>e.jsxs("span",{className:"bg-emerald-50 text-emerald-500 border border-emerald-200 text-sm sm:text-sm px-3 py-1 rounded-full",children:["#",r(`tags.${s.tagName}`)]},s.tagId))}),e.jsxs("div",{className:"flex justify-between items-center  mt-3",children:[e.jsxs("button",{onClick:p,disabled:l.isPending,className:`flex items-center gap-1 px-2 py-1 rounded-full border font-medium text-sm sm:text-sm 
                                        ${t.isLiked?"bg-red-50 text-red-500 border-red-200":"bg-gray-100 text-gray-500 border-gray-200"} 
                                        hover:shadow-sm transition-colors duration-200`,children:[t.isLiked?"❤️":"🤍"," ",r("likeReview")," ",t.recommendCnt]}),e.jsx("button",{onClick:m,className:"text-red-500 hover:text-red-600 transition text-sm sm:text-sm duration-200",children:r("reportReview")})]})]}),e.jsx(C,{})]}),g.map(s=>e.jsx(L,{x:s.x,y:s.y},s.id))]})})})}function P(){const{rid:t}=h(),{i18n:a}=x(),o=a.language,{data:r,isLoading:i,isError:m}=I({queryKey:["review",Number(t)],queryFn:()=>N(Number(t),o)});return e.jsx("div",{children:e.jsx(D,{review:r==null?void 0:r.data,isLoading:i,isError:m})})}const te=f(P);export{te as default};
