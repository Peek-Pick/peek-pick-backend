import{w as L}from "./with-props-JNWkkrjn.js";import{p as I,t as K,a as x}from "./chunk-D4RADZKF-DdSvw7tX.js";import{j as e}from "./jsx-runtime-D_zvdyIk.js";import{L as F}from "./loadingComponent-BmsJ8g5Y.js";import{u as H}from "./useQuery-CxabGwVz.js";import{a as R}from "./adminReviewAPI-DvKoKPNO.js";import{P as $}from "./PaginationComponent-CiWrhgCU.js";import{F as E,h as D}from "./index-DP0VIuDs.js";import"./index-Druiat5n.js";import"./useBaseQuery-BTSvK_Q6.js";import"./removable-CGh8wCEh.js";import"./query-CjmfnAM3.js";import"./QueryClientProvider--V26__jT.js";import"./axiosInstance-CCaw23o5.js";import"./index-xsH4HHeE.js";import"./chevron-left-i71DKoJD.js";import"./createLucideIcon-Cyt6UY_L.js";import"./chevron-right-WLYf1NvF.js";function q({data:t,isLoading:i,isError:d,page:n,category:p,keyword:m,hidden:r}){const a=I();if(i)return e.jsx(F,{isLoading:!0});if(d||!t)return e.jsx("div",{className:"p-4 text-red-500",children:"리뷰 목록 불러오기 실패"});const g= s=>{a(`/admin/reviews/${s}?page=${n}&keyword=${m}&category=${p}&hidden=${r}`,{state:{from:"reviewList"}})};return e.jsx("div",{children:e.jsx("div",{className:"overflow-x-auto bg-white shadow rounded-lg",children:e.jsxs("table",{className:"min-w-full text-sm divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-1/9 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),e.jsx("th",{className:"w-1/9 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상품번호"}),e.jsx("th",{className:"w-2/9 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"상품명"}),e.jsx("th",{className:"w-1/9 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작성자번호"}),e.jsx("th",{className:"w-2/9 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작성자명"}),e.jsx("th",{className:"w-2/9 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작성일"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-3 text-center text-gray-500",children:"등록된 리뷰가 없습니다."})}):t.map(s=>e.jsxs("tr",{onClick:()=>g(s.reviewId),className:"hover:bg-gray-100 cursor-pointer text-sm text-gray-800",children:[e.jsx("td",{className:"px-4 py-4 text-left",children:s.reviewId}),e.jsx("td",{className:"px-4 py-4 text-left",children:s.productId}),e.jsx("td",{className:"px-4 py-4 text-left",children:s.name}),e.jsx("td",{className:"px-4 py-4 text-left",children:s.userId}),e.jsx("td",{className:"px-4 py-4 text-left",children:s.nickname}),e.jsx("td",{className:"px-4 py-4 text-left",children:new Date(s.regDate).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})})]},s.reviewId))})]})})})}function A({category:t,setCategory:i,keyword:d,setKeyword:n,onSearch:p,hidden:m,setHidden:r}){return e.jsxs("div",{className:"flex justify-between items-center mb-2 text-sm bg-white p-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:t,onChange: a=>{i(a.target.value),n("")},className:"border border-gray-300 rounded-lg px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"전체"}),e.jsx("option",{value:"reviewId",children:"리뷰번호"}),e.jsx("option",{value:"productId",children:"상품번호"}),e.jsx("option",{value:"productName",children:"상품명"}),e.jsx("option",{value:"userId",children:"유저번호"})]}),e.jsx("input",{type:"text",value:d,onChange: a=>n(a.target.value),placeholder:"키워드를 입력하세요",className:"border border-gray-300 rounded-lg px-4 py-1.5 w-64 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:t==="all"}),e.jsx("button",{onClick:p,className:"bg-blue-600 text-white px-5 py-1.5 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition",disabled:t!=="all"&&d.trim()==="",children:"검색"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"hiddenOnly",checked:m,onChange: a=>r(a.target.checked)}),e.jsx("label",{htmlFor:"hiddenOnly",className:"text-sm text-gray-700",children:"숨김 리뷰만 보기"})]})]})}function B(){const[t,i]=K(),d=t.get("category")||"all",n=t.get("keyword")||"",p=Number(t.get("page")||"0"),m=t.get("hidden")==="true",[r,a]=x.useState(d),[g,s]=x.useState(n),[h,f]=x.useState(n),[u,y]=x.useState(p),[l,j]=x.useState(m);x.useEffect(()=>{const o=t.get("category")||"all",w=t.get("keyword")||"",S=Number(t.get("page")||"0"),C=t.get("hidden")==="true";a(o),f(w),s(w),y(S),j(C)},[t]);const N= o=>{i({category:r,keyword:h,hidden:o.toString(),page:"0"}),j(o),y(0)},b=()=>{i({category:r,keyword:g,hidden:l.toString(),page:"0"}),f(g),y(0)},v= o=>{i({category:r,keyword:h,hidden:l.toString(),page:o.toString()}),y(o)},{data:c,isLoading:k,isError:P}=H({queryKey:["adminReviewList",u,u,r,h,l],queryFn:()=>R(u,r,h,l)});return e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(E,{icon:D,style:{width:"20px",height:"20px"}})," 리뷰 관리"]}),e.jsx(A,{category:r,setCategory:a,keyword:g,setKeyword:s,hidden:l,setHidden:N,onSearch:b}),e.jsx(q,{data:c==null?void 0:c.content,isLoading:k,isError:P,page:u,category:r,keyword:h,hidden:l}),e.jsx($,{currentPage:u,totalPages:c==null?void 0:c.totalPages,onPageChange:v,maxPageButtons:10})]})}const ae=L(B);export{ae as default};
