import{w as x}from "./with-props-JNWkkrjn.js";import{p as f,a}from "./chunk-D4RADZKF-DdSvw7tX.js";import{j as e}from "./jsx-runtime-D_zvdyIk.js";import{u as g}from "./QueryClientProvider--V26__jT.js";import{u as b}from "./useMutation-iBKtBQ4J.js";import{P as h}from "./points-A4FasJQU.js";import{F as y,s as j}from "./index-DP0VIuDs.js";import{a as w}from "./adminPointsAPI-6xBe1sfk.js";import"./mutation-CruqbX-z.js";import"./removable-CGh8wCEh.js";import"./axiosInstance-CCaw23o5.js";import"./index-xsH4HHeE.js";function v(){const o=f(),n=a.useRef(null),s=a.useRef(null),[l,i]=a.useState("파일을 선택하세요"),d=g(),c=b({mutationFn:w,onSuccess:()=>{d.invalidateQueries({queryKey:["pointsList"]}),alert("상품이 등록되었습니다."),o("/admin/points/list")},onError:()=>{alert("등록에 실패했습니다.")}}),m= t=>{t.preventDefault();const r=n.current;if(!r)return;const p={imageFile:s.current.files[0],item:r.item.value,price:Number(r.price.value),description:r.description.value,productType:r.productType.value};c.mutate(p)},u= t=>{t.target.files&&t.target.files.length>0?i(t.target.files[0].name):i("파일을 선택하세요")};return e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6 text-gray-800 max-w-2xl mx-auto",children:[e.jsxs("h2",{className:"text-xl font-bold mb-6 border-b pb-2 flex items-center gap-2",children:[e.jsx(y,{icon:j}),"상품 등록"]}),e.jsxs("form",{ref:n,onSubmit:m,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-2 uppercase tracking-wide",children:"상품명"}),e.jsx("input",{type:"text",name:"item",className:"w-full border border-gray-200 rounded-md px-3 py-2 text-gray-900 shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-2 uppercase tracking-wide",children:"가격"}),e.jsx("input",{type:"number",name:"price",className:"w-full border border-gray-200 rounded-md px-3 py-2 text-gray-900 shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-2 uppercase tracking-wide",children:"설명"}),e.jsx("textarea",{name:"description",rows:4,className:"w-full border border-gray-200 rounded-md px-3 py-2 text-gray-900 shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 whitespace-pre-line leading-relaxed",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-2 uppercase tracking-wide",children:"상품 타입"}),e.jsxs("select",{name:"productType",className:"w-full border border-gray-200 rounded-md px-3 py-2 text-gray-900 shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"선택"}),Object.entries(h).map(([t,r])=>e.jsx("option",{value:t,children:r},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"이미지 파일"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>{var t;return(t=s.current)==null?void 0:t.click()},className:"flex items-center gap-1 rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-100 hover:text-gray-800 transition",children:"파일 선택"}),e.jsx("span",{className:"text-gray-600 truncate max-w-xs",children:l})]}),e.jsx("input",{type:"file",name:"imageFile",accept:"image/*",className:"hidden",ref:s,onChange:u})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{type:"submit",className:"flex items-center gap-1 rounded-md bg-purple-100 px-4 py-2 text-sm font-medium text-purple-700 shadow-sm hover:bg-purple-200 transition",children:"등록"})})]})]})}function N(){return e.jsx("div",{children:e.jsx(v,{})})}const Q=x(N);export{Q as default};
