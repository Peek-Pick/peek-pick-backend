import{a as l}from "./chunk-D4RADZKF-DdSvw7tX.js";import{j as t}from "./jsx-runtime-D_zvdyIk.js";import{F,u as S}from "./index-DP0VIuDs.js";const U="https://myapp.peek-pick.click/api/v1",R=U.replace("https://myapp.peek-pick.click/api/v1","https://myapp.peek-pick.click").replace("https://myapp.peek-pick.click/api/v1","https://myapp.peek-pick.click");function L({initialData:s=null,onSubmit:f,submitLabel:m,extraActions:b}){const[a,i]=l.useState((s==null?void 0:s.title)||""),[p,u]=l.useState((s==null?void 0:s.content)||""),[n,x]=l.useState((s==null?void 0:s.imgUrls)||[]),[c,h]=l.useState([]),d=l.useRef(null);l.useEffect(()=>{s&&(i(s.title),u(s.content),x(s.imgUrls))},[s]);const w= e=>{const r=e.target.files?Array.from(e.target.files):[];h(o=>[...o,...r]),d.current&&(d.current.value="")},y= e=>{x(r=>r.filter(o=>o!==e))},j= e=>{h(r=>r.filter(o=>o!==e))},v= e=>{if(e.preventDefault(),!a.trim()||!p.trim()){alert("제목과 내용을 모두 입력해주세요");return}const r={title:a.trim(),content:p.trim(),imgUrls:n},o=new DataTransfer;c.forEach(E=>o.items.add(E));const C=o.files.length?o.files:void 0;f(r,C??null)},g=n.length+c.length,k=g>0?`${g}개 선택됨`:"선택된 파일 없음",N=m==="수정"?"flex items-center gap-1 rounded-md border border-blue-200 bg-blue-50 px-4 py-2 text-sm font-medium text-blue-600 shadow-sm hover:bg-blue-100 transition":"flex items-center gap-1 rounded-md bg-purple-100 px-4 py-2 text-sm font-medium text-purple-700 shadow-sm hover:bg-purple-200 transition";return t.jsxs("form",{onSubmit:v,className:"bg-white shadow-md rounded-lg p-6 text-gray-800 max-w-2xl mx-auto space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-2 uppercase tracking-wide",children:"제목"}),t.jsx("input",{type:"text",className:"w-full border border-gray-200 rounded-md px-3 py-2 text-gray-900 shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500",value:a,onChange: e=>i(e.target.value),placeholder:"제목을 입력하세요"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-2 uppercase tracking-wide",children:"내용"}),t.jsx("textarea",{rows:6,className:"w-full border border-gray-200 rounded-md px-3 py-2 text-gray-900 shadow-sm focus:outline-none focus:ring-1 focus:ring-blue-500 whitespace-pre-line leading-relaxed",value:p,onChange: e=>u(e.target.value),placeholder:"내용을 입력하세요"})]}),(n.length>0||c.length>0)&&t.jsxs("div",{className:"flex flex-wrap gap-3",children:[n.map(e=>{const r=e.startsWith("http")?e:`${R}${e}`;return t.jsxs("div",{className:"relative w-24 h-24 border rounded overflow-hidden",children:[t.jsx("img",{src:r,alt:"공지 이미지",className:"w-full h-full object-cover",onError: o=>o.currentTarget.src=""}),t.jsx("button",{type:"button",onClick:()=>y(e),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs shadow",children:"×"})]},e)}),c.map((e, r)=>t.jsxs("div",{className:"relative w-24 h-24 border rounded overflow-hidden",children:[t.jsx("img",{src:URL.createObjectURL(e),alt:"new",className:"w-full h-full object-cover"}),t.jsx("button",{type:"button",onClick:()=>j(e),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs shadow",children:"×"})]},r))]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-semibold text-gray-400 mb-2 uppercase tracking-wide",children:"이미지 파일"}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("button",{type:"button",onClick:()=>{var e;return(e=d.current)==null?void 0:e.click()},className:"flex items-center gap-1 rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-100 hover:text-gray-800 transition",children:[t.jsx(F,{icon:S}),"이미지 선택"]}),t.jsx("span",{className:"text-gray-600 truncate max-w-xs",children:k})]}),t.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",ref:d,onChange:w})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[b,t.jsx("button",{type:"submit",className:N,children:m})]})]})}export{L as N};
