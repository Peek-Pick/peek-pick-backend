import{w as b}from "./with-props-JNWkkrjn.js";import{p as h,s as y,t as j,a as N,w as v}from "./chunk-D4RADZKF-DdSvw7tX.js";import{j as e}from "./jsx-runtime-D_zvdyIk.js";import{A as w}from "./auDetailHeaderComponent-B_2kTVIv.js";import{u as k}from "./useTagSelector-B0AbEUZv.js";import{g as D}from "./countryUtils-CZtoRm9G.js";import{R as L}from "./rating-s5hnHQfB.js";import{u}from "./useQuery-CxabGwVz.js";import{P as A}from "./PaginationComponent-CiWrhgCU.js";import{a as P,b as C,c as E}from "./adminUsersAPI-DY3ReOB7.js";import{L as R}from "./loadingComponent-BmsJ8g5Y.js";import"./axiosInstance-CCaw23o5.js";import"./index-xsH4HHeE.js";import"./useBaseQuery-BTSvK_Q6.js";import"./removable-CGh8wCEh.js";import"./query-CjmfnAM3.js";import"./QueryClientProvider--V26__jT.js";import"./chevron-left-i71DKoJD.js";import"./createLucideIcon-Cyt6UY_L.js";import"./chevron-right-WLYf1NvF.js";import"./index-Druiat5n.js";function S({isSocial:t,gender:a,nationality:r,birthDate:n,status:o,regDate:s,tagIdList:c}){const{selectedTags:d,allTags:g,loading:m}=k(c);if(m)return e.jsx("p",{children:"Loading tags..."});const x=g.filter(l=>d.includes(l.tagId)),i=new Date(s).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1});return e.jsxs("div",{className:"flex flex-col overflow-x-auto ",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-md p-6 min-w-[400px]",children:[e.jsx("div",{className:"mb-4 border-b border-gray-200 py-4",children:e.jsx("h2",{className:"text-lg font-bold text-gray-700 dark:text-white",children:"Profile Information"})}),e.jsx("div",{className:"flex flex-col",children:[{label:"Account Type",value:t?"Social":"Local",type:"account"},{label:"Gender",value:a??"N/A",type:"gender"},{label:"Nationality",value:D(r)??"N/A"},{label:"BirthDate",value:n??"N/A"},{label:"Status",value:o??"N/A",type:"status"},{label:"RegDate",value:i??"N/A"}].map(({label:l,value:p,type:f})=>e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsxs("p",{className:"text-md font-bold text-gray-500 dark:text-white mr-2",children:[l,":"]}),T(f,p)]},l))})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-md p-6 my-4 min-w-[400px]",children:e.jsxs("div",{className:"mb-4 ",children:[e.jsx("h2",{className:"border-b border-gray-200 py-4 text-lg font-bold text-gray-700 dark:text-white",children:"Selected Tags"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4 mt-4",children:x.length>0?x.map(l=>e.jsx("span",{className:"overflow-x px-2 py-1 text-sm bg-blue-100 text-blue-800 rounded-full",children:l.tagName},l.tagId)):e.jsx("p",{className:"text-sm text-gray-500",children:"No tags selected."})})]})})]})}const T=(t, a)=>t==="account"?e.jsx("span",{className:`px-2 py-1 rounded-full text-sm font-medium ${a==="Social"?"bg-blue-100 text-blue-700":"bg-emerald-100 text-emerald-600"}`,children:a}):t==="gender"?e.jsx("span",{className:`px-2 py-1 rounded-full text-sm font-medium ${a.toLowerCase()==="male"?"bg-blue-100 text-blue-700":"bg-pink-100 text-pink-700"}`,children:a}):t==="status"?e.jsx("div",{className:"flex gap-2",children:["ACTIVE","BANNED","DELETED"].map(r=>e.jsx("span",{className:`text-sm font-medium px-2 py-1 rounded-full border
                        ${a===r?r==="ACTIVE"?"bg-blue-100 text-blue-700 border-transparent":r==="BANNED"?"bg-yellow-100 text-yellow-700 border-transparent":"bg-red-100 text-red-700 border-transparent":"text-gray-400 border-gray-200"}
                    `,children:r},r))}):e.jsx("p",{className:"text-md text-gray-500",children:a});function I({reviewCount:t,reviewList:a,isLoading:r,isError:n}){const o=h();if(r)return e.jsx("p",{className:"text-center p-4 text-base sm:text-lg",children:"로딩 중입니다"});if(!n)return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"mb-4 shrink-0 border-b border-gray-200 py-4",children:e.jsx("h2",{className:"text-lg font-bold text-gray-700 dark:text-white",children:"Reviews"})}),e.jsxs("div",{className:" border-b border-gray-200 py-4 mb-2 shrink-0",children:["누적 리뷰 ",e.jsx("span",{className:"text-red-500 c",children:t}),"건"]}),e.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-1",children:a.map(s=>e.jsxs("div",{className:"bg-white rounded-md p-6 shadow-md",children:[e.jsx("div",{className:"flex sm:items-center flex-col min-[400px]:flex-row justify-between gap-5 mb-3",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:`https://myapp.peek-pick.click${s.imageThumbUrl}`,className:"w-20 h-20 rounded-lg object-cover border-2 border-gray-100",alt:"상품정보"}),e.jsx("h6",{className:"font-semibold text-md leading-8 text-gray-600",children:s.name})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"flex items-center gap-2",children:Array.from({length:5}).map((c,d)=>e.jsx(L,{filled:d<s.score},d))}),e.jsxs("p",{className:"font-normal text-sm sm:text-sm text-gray-400",children:["작성일자 ",new Date(s.regDate).toLocaleDateString()]})]}),e.jsx("p",{className:"line-clamp-4 font-normal text-base sm:text-base leading-7.5 text-gray-600 max-xl:text-justify mb-2",children:s.comment}),e.jsx("div",{className:"flex flex-col-2 sm:flex-row items-stretch justify-end gap-4 mt-4 w-full",children:e.jsx("button",{type:"button",onClick:()=>o(`/admin/reviews/${s.reviewId}`),className:"w-full sm:flex-1 px-4 py-2 text-sm sm:text-sm rounded-lg bg-blue-100 text-blue-800 cursor-pointer font-medium text-center transition-all duration-300 hover:bg-blue-200 hover:text-blue-800 min-w-0",children:"리뷰 상세보기"})})]},s.reviewId))})]})}function U({users:t,userId:a,isLoading:r,isError:n}){const o=h(),s=y(),[c]=j();c.get("from");const d=`/admin/users/list${s.search}`,{data:g}=u({queryKey:["adminUserReviewCount"],queryFn:()=>P(a)}),[m,x]=N.useState(0),{data:i,isLoading:l,isError:p}=u({queryKey:["adminUserReviews",a,m],queryFn:()=>C(a,m)});return r?e.jsx(R,{isLoading:!0}):n||!t?e.jsx("div",{className:"p-4 text-red-500",children:"유저 정보 불러오기 실패"}):e.jsxs("div",{className:"flex flex-col",children:[e.jsx(w,{backgroundProfile:"bg-white/80 dark:bg-gradient-to-br dark:from-white/20 dark:to-transparent",avatarImage:t.profileImgUrl,name:t.nickname,email:t.email}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-[22px] px-4 py-6 ",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-md p-6 h-[calc(100vh-60px)] flex flex-col",children:e.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[e.jsx("div",{className:"flex-1 flex flex-col min-h-0",children:e.jsx(I,{reviewCount:g,reviewList:(i==null?void 0:i.data.content)??[],isLoading:l,isError:p})}),e.jsx("div",{children:e.jsx(A,{currentPage:m,totalPages:(i==null?void 0:i.data.totalPages)||0,onPageChange:x,maxPageButtons:10})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-md p-6 h-[calc(100vh-60px)] flex flex-col",children:e.jsx(S,{isSocial:t.isSocial,gender:t.gender,nationality:t.nationality,birthDate:t.birthDate,status:t.status,regDate:t.regDate,tagIdList:t.tagIdList})}),e.jsx("div",{className:"xl:col-span-2 flex justify-end",children:e.jsx("button",{onClick:()=>o(d),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 py-1.5 px-4 rounded-lg",children:"목록가기"})})]})]})}function q(){const{uid:t}=v(),a=Number(t),{data:r,isError:n,isLoading:o}=u({queryKey:["adminUserProfile",a],queryFn:()=>E(a),enabled:a!==null});return e.jsx("div",{children:e.jsx(U,{users:r,userId:a,isLoading:o,isError:n})})}const se=b(q);export{se as default};
