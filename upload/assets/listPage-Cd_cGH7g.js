import{w as R}from "./with-props-JNWkkrjn.js";import{p as L,t as A,a as p}from "./chunk-D4RADZKF-DdSvw7tX.js";import{j as e}from "./jsx-runtime-D_zvdyIk.js";import{u as F}from "./useQuery-CxabGwVz.js";import{g as T}from "./adminReviewAPI-DvKoKPNO.js";import{F as E,j as O}from "./index-DP0VIuDs.js";import{R as w}from "./useReviewReport-CWkDotFm.js";import{L as H}from "./loadingComponent-BmsJ8g5Y.js";import{P as K}from "./PaginationComponent-CiWrhgCU.js";import"./useBaseQuery-BTSvK_Q6.js";import"./removable-CGh8wCEh.js";import"./query-CjmfnAM3.js";import"./QueryClientProvider--V26__jT.js";import"./axiosInstance-CCaw23o5.js";import"./index-xsH4HHeE.js";import"./useMutation-iBKtBQ4J.js";import"./mutation-CruqbX-z.js";import"./reviewAPI-zRekXALF.js";import"./sweetalert2.esm.all-9Qm2jZ7z.js";/* empty css                         */import"./useTranslation-DnilsLqi.js";import"./i18nInstance-CHFDjdcJ.js";import"./index-Druiat5n.js";import"./chevron-left-i71DKoJD.js";import"./createLucideIcon-Cyt6UY_L.js";import"./chevron-right-WLYf1NvF.js";function $({category:t,setCategory:a,keyword:l,setKeyword:n,onSearch:m,hidden:g,setHidden:r}){return e.jsxs("div",{className:"flex justify-between items-center mb-2 text-sm bg-white p-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:t,onChange: i=>{a(i.target.value),n("")},className:"border border-gray-300 rounded-lg px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"all",children:"전체"}),e.jsx("option",{value:"reviewId",children:"리뷰번호"}),e.jsx("option",{value:"reviewerId",children:"작성자번호"}),e.jsx("option",{value:"userId",children:"신고자번호"})]}),e.jsx("input",{type:"text",value:l,onChange: i=>n(i.target.value),placeholder:"키워드를 입력하세요",className:"border border-gray-300 rounded-lg px-4 py-1.5 w-64 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:t==="all"}),e.jsx("button",{onClick:m,className:"bg-blue-600 text-white px-5 py-1.5 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition",disabled:t!=="all"&&l.trim()==="",children:"검색"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"hiddenOnly",checked:g,onChange: i=>r(i.target.checked)}),e.jsx("label",{htmlFor:"hiddenOnly",className:"text-sm text-gray-700",children:"숨김 리뷰만 보기"})]})]})}function D({data:t,isLoading:a,isError:l,page:n,category:m,keyword:g,hidden:r}){const i=L(),u={[w.POLITICS]:"bg-red-100 text-red-800",[w.HATE]:"bg-yellow-100 text-yellow-800",[w.DEFAMATION]:"bg-blue-100 text-blue-800",[w.PROFANITY]:"bg-purple-100 text-purple-800"},h={POLITICS:"정치",HATE:"혐오",DEFAMATION:"비방",PROFANITY:"욕설"};if(a)return e.jsx(H,{isLoading:!0});if(l||!t)return e.jsx("div",{className:"p-4 text-red-500",children:"신고 목록 불러오기 실패"});const o= s=>{i(`/admin/reviews/${s}?page=${n}&keyword=${g}&category=${m}&hidden=${r}`,{state:{from:"reportList"}})};return e.jsx("div",{children:e.jsx("div",{className:"overflow-x-auto bg-white shadow rounded-lg",children:e.jsxs("table",{className:"min-w-full text-sm divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-1/7 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"#"}),e.jsx("th",{className:"w-1/7 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"리뷰번호"}),e.jsx("th",{className:"w-1/7 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"작성자번호"}),e.jsx("th",{className:"w-1/7 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"신고자번호"}),e.jsx("th",{className:"w-1/7 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"신고사유"}),e.jsx("th",{className:"w-2/7 px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"신고일"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"px-4 py-3 text-center text-gray-500",children:"등록된 리뷰가 없습니다."})}):t.map(s=>e.jsxs("tr",{onClick:()=>o(s.reviewId),className:"hover:bg-gray-100 cursor-pointer text-sm text-gray-800",children:[e.jsx("td",{className:"px-4 py-4 text-left",children:s.reviewReportId}),e.jsx("td",{className:"px-4 py-4 text-left",children:s.reviewId}),e.jsx("td",{className:"px-4 py-4 text-left",children:s.reviewerId}),e.jsx("td",{className:"px-4 py-4 text-left",children:s.userId}),e.jsx("td",{className:"px-4 py-4 text-left",children:e.jsx("span",{className:`px-2 py-1.5 rounded-md text-xs font-medium ${u[s.reason]||"bg-gray-100 text-gray-800"}`,children:h[s.reason]})}),e.jsx("td",{className:"px-4 py-3.5 text-left",children:new Date(s.regDate).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1})})]},s.reviewReportId))})]})})})}function M(){const[t,a]=A(),l=t.get("category")||"all",n=t.get("keyword")||"",m=Number(t.get("page")||"0"),g=t.get("hidden")==="true",[r,i]=p.useState(l),[u,h]=p.useState(n),[o,s]=p.useState(n),[y,f]=p.useState(m),[c,j]=p.useState(g);p.useEffect(()=>{const d=t.get("category")||"all",b=t.get("keyword")||"",S=Number(t.get("page")||"0"),C=t.get("hidden")==="true";i(d),s(b),h(b),f(S),j(C)},[t]);const N= d=>{a({category:r,keyword:o,hidden:d.toString(),page:"0"}),j(d),f(0)},v=()=>{a({category:r,keyword:u,hidden:c.toString(),page:"0"}),s(u),f(0)},P= d=>{a({category:r,keyword:o,hidden:c.toString(),page:d.toString()}),f(d)},{data:x,isLoading:I,isError:k}=F({queryKey:["adminReviewReportList",y,r,o,c],queryFn:()=>T(y,r,o,c)});return e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(E,{icon:O,style:{width:"20px",height:"20px"}})," 리뷰 신고 관리"]}),e.jsx($,{category:r,setCategory:i,keyword:u,setKeyword:h,hidden:c,setHidden:N,onSearch:v}),e.jsx(D,{data:x==null?void 0:x.content,isLoading:I,isError:k,page:y,category:r,keyword:o,hidden:c}),e.jsx(K,{currentPage:y,totalPages:x==null?void 0:x.totalPages,onPageChange:P,maxPageButtons:10})]})}const me=R(M);export{me as default};
