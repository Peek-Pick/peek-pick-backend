import{w as p}from "./with-props-JNWkkrjn.js";import{p as u,s as f,w as b}from "./chunk-D4RADZKF-DdSvw7tX.js";import{j as e}from "./jsx-runtime-D_zvdyIk.js";import{A as y}from "./auDetailHeaderComponent-B_2kTVIv.js";import{c as h}from "./createLucideIcon-Cyt6UY_L.js";import{d as w,t as v,b as j}from "./adminReviewAPI-DvKoKPNO.js";import{u as N}from "./QueryClientProvider--V26__jT.js";import{L as k}from "./loadingComponent-BmsJ8g5Y.js";import{u as R}from "./useQuery-CxabGwVz.js";import"./axiosInstance-CCaw23o5.js";import"./index-xsH4HHeE.js";import"./index-Druiat5n.js";import"./useBaseQuery-BTSvK_Q6.js";import"./removable-CGh8wCEh.js";import"./query-CjmfnAM3.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],I=h("eye-off",C);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],D=h("eye",L),P=({title:t,score:i,comment:n,images:l,tags:s})=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-md p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsx("h2",{className:"text-lg font-bold text-gray-700 dark:text-white",children:t})}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-md font-bold text-gray-700 dark:text-white mr-2 mb-2",children:"별점"}),[i].map((a,r)=>e.jsx("div",{className:"flex items-center mb-4",children:e.jsx("p",{className:"text-md text-gray-500",children:a})},r)),e.jsx("p",{className:"text-md font-bold text-gray-700 dark:text-white mr-2 mb-2",children:"커멘트"}),[n].map((a,r)=>e.jsx("div",{className:"flex items-center mb-4",children:e.jsx("p",{className:"text-md text-gray-500",children:a})},r)),e.jsx("p",{className:"text-md font-bold text-gray-700 dark:text-white mr-2 mb-2",children:"이미지"}),e.jsx("div",{className:"flex flex-wrap gap-4 mb-4",children:l?l.map((a,r)=>e.jsx("img",{src:`https://myapp.peek-pick.click/reviews/${a.imgUrl}`,alt:`리뷰 이미지 ${r+1}`,className:"w-24 h-24 object-cover rounded-lg shadow"},r)):e.jsx("p",{className:"text-md text-gray-500",children:"등록된 이미지가 없습니다."})}),e.jsx("p",{className:"text-md font-bold text-gray-700 dark:text-white mr-2 mb-2",children:"태그"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.length>0?s.map((a,r)=>e.jsx("span",{className:"px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm font-medium dark:bg-blue-900 dark:text-blue-100",children:a.tagName},r)):e.jsx("p",{className:"text-md text-gray-500",children:"등록된 태그가 없습니다."})})]})]}),$=({title:t,reviewId:i,productId:n,productName:l,recommendCnt:s,reportCnt:a,isHidden:r,regDate:d,modDate:c,onToggleHidden:m})=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-md p-6 my-6",children:[e.jsx("div",{className:"mb-6",children:e.jsx("h2",{className:"text-lg font-bold text-gray-700 dark:text-white",children:t})}),e.jsx("div",{className:"flex flex-col",children:[{label:"Review Id",value:i},{label:"Product Id",value:n},{label:"Product Name",value:l},{label:"Recommend Count",value:s},{label:"Registered Date",value:d},{label:"Modified Date",value:c},{label:"Report Count",value:a}].map((o,x)=>e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsxs("p",{className:"text-md font-bold text-gray-700 dark:text-white mr-2",children:[o.label,":"]}),e.jsx("p",{className:"text-md text-gray-500",children:o.value})]},x))}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"text-md font-bold text-gray-700 dark:text-white mr-2",children:"Is Hidden:"}),e.jsx("p",{className:`px-2.5 py-0.5 text-sm rounded-full ${r?"bg-red-100 text-red-600":"bg-green-100 text-green-600"}`,children:r?"숨김":"표시"})]}),e.jsx("button",{className:"p-1 rounded hover:bg-gray-100 dark:hover:bg-gray-700",title:r?"숨김 해제":"숨기기",onClick:m,children:r?e.jsx(I,{size:20}):e.jsx(D,{size:20})})]})]});function M({data:t,isLoading:i,isError:n}){var o;const l=N(),s=u(),a=f(),d=(((o=a.state)==null?void 0:o.from)||"reviewList")==="reportList"?`/admin/reports/list${a.search}`:`/admin/reviews/list${a.search}`,c=async()=>{if(window.confirm("정말 이 리뷰를 삭제하시겠습니까?"))try{await w(t.reviewId),await Promise.all([l.invalidateQueries({queryKey:["adminReviewList"],exact:!1}),l.invalidateQueries({queryKey:["adminReviewReportList"],exact:!1})]),alert("삭제가 완료되었습니다."),s(d)}catch(g){alert("삭제 중 오류가 발생했습니다."),console.error(g)}},m=async()=>{if(window.confirm(t.isHidden?"해당 리뷰의 숨김을 해제하시겠습니까?":"해당 리뷰를 숨기시겠습니까?"))try{await v(t.reviewId),alert("숨김 상태를 변경하였습니다."),s(0)}catch(g){alert("숨김 상태 변경 중 오류가 발생했습니다."),console.error(g)}};return i?e.jsx(k,{isLoading:!0}):n||!t?e.jsx("div",{className:"p-4 text-red-500",children:"리뷰 정보 불러오기 실패"}):e.jsxs("div",{className:"flex flex-col",children:[e.jsx(y,{backgroundProfile:"bg-white/80 dark:bg-gradient-to-br dark:from-white/20 dark:to-transparent",avatarImage:t.profileImageUrl,name:t.nickname,email:t.email,onClick:()=>s(`/admin/users/${t.userId}`)}),e.jsxs("div",{className:"flex flex-col xl:flex-row gap-6 flex-grow mt-6",children:[e.jsx("div",{className:"w-full xl:w-1/2",children:e.jsx($,{title:"리뷰 정보",reviewId:t.reviewId,productId:t.productId,productName:t.name,recommendCnt:t.recommendCnt,reportCnt:t.reportCnt,isHidden:t.isHidden,regDate:new Date(t.regDate).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),modDate:new Date(t.regDate).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}),onToggleHidden:m})}),e.jsx("div",{className:"w-full xl:w-1/2",children:e.jsx(P,{title:"리뷰 내용",score:t.score,comment:t.comment,images:t.images,tags:t.tagList})})]}),e.jsxs("div",{className:"flex flex-wrap justify-end gap-2 mt-6",children:[e.jsx("button",{onClick:c,className:"bg-red-500 hover:bg-red-700 text-white py-1.5 px-4 rounded-lg",children:"리뷰 삭제"}),e.jsx("button",{onClick:()=>s(d),className:"bg-gray-300 hover:bg-gray-400 text-gray-800 py-1.5 px-4 rounded-lg",children:"목록가기"})]})]})}function q(){const{rid:t}=b(),i=Number(t),{data:n,isLoading:l,isError:s}=R({queryKey:["adminReview",i],queryFn:()=>j(i),enabled:i!==null});return e.jsx("div",{children:e.jsx(M,{data:n,isLoading:l,isError:s})})}const V=p(q);export{V as default};
