import{w as E}from "./with-props-JNWkkrjn.js";import{a as i,p as k,q as b}from "./chunk-D4RADZKF-DdSvw7tX.js";import{j as e}from "./jsx-runtime-D_zvdyIk.js";import{F as C}from "./index-DJdx2QAc.js";import{u as P}from "./signupContext-DhL0Xc1z.js";import{g as S}from "./googleAPI-CBAUxJgX.js";import{S as F}from "./signupStepperHeader-DU-4b-_Q.js";import{c as I}from "./signupAPI-CKOHqB1c.js";import{u as q}from "./usePasswordChange-C7rN1fas.js";import"./iconBase-CtWej6xm.js";import"./index-xsH4HHeE.js";import"./sweetalert2.esm.all-9Qm2jZ7z.js";import"./index-Druiat5n.js";import"./axiosInstance-CCaw23o5.js";const A=()=>{const[l,c]=i.useState(""),[d,a]=i.useState(null),[x,n]=i.useState(!1),[m,p]=i.useState(!1),[u,t]=i.useState(!1);return i.useEffect(()=>{const o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l);p(o),t(!1),a(null)},[l]),{email:l,setEmail:c,checkEmailDupl:async()=>{if(!m){a("It's not an email format"),t(!1);return}try{n(!0);const{exists:r}=await I(l);r?(a("This email is already in use."),t(!1)):(a(null),t(!0))}catch{a("Error checking email..."),t(!1)}finally{n(!1)}},isValidFormat:m,isAvailable:u,isChecking:x,error:d}};function D(){const l=S(),c=k(),{email:d,setEmail:a,password:x,setPassword:n}=P(),{setEmail:m,checkEmailDupl:p,isChecking:u,isAvailable:t,error:g}=A(),{newPassword:r,confirmPassword:o,setNewPassword:j,setConfirmPassword:w,error:h}=q(),f=!!r&&!!o&&r===o,v= s=>{s.preventDefault(),c("/signup/profile")};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gradient-to-r from-yellow-200 to-green-300 px-4",children:[e.jsx("div",{className:"w-full px-4",children:e.jsx(F,{currentStep:1})}),e.jsx("div",{className:"flex justify-center w-full sm:px-0 mb-8 sm:mb-12",children:e.jsxs("div",{className:"mb-20 w-full max-w-md bg-white p-6 rounded-xl shadow-md",children:[e.jsx("h2",{className:"text-xl font-bold text-center mb-6",children:"Register With"}),[{Icon:C,label:"Google"}].map(({Icon:s,label:y}, N)=>e.jsx("div",{className:"flex justify-center mb-2",children:e.jsxs(b,{to:l,className:"w-full px-4 py-3 flex items-center justify-center border border-gray-300 rounded-[15px] cursor-pointer hover:bg-gray-100 transition gap-3",children:[e.jsx(s,{className:"w-6 h-6 sm:w-[30px] sm:h-[30px]"}),e.jsx("span",{className:"text-sm font-medium",children:y})]})},N)),e.jsx("p",{className:"text-center text-gray-400 font-bold mb-6",children:"or"}),e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-normal",children:"Email"}),e.jsx("input",{type:"email",name:"email",required:!0,placeholder:"Your email address",className:"w-full px-4 py-3 mt-1 rounded-[15px] border border-gray-300 text-sm",value:d,onChange: s=>{a(s.target.value),m(s.target.value)},onBlur:p}),g&&e.jsx("p",{className:"text-red-500 text-sm mt-1 ml-4",children:g}),t&&e.jsx("p",{className:"text-green-500 text-sm mt-1 ml-4",children:"The email is available."}),u&&e.jsx("p",{className:"text-gray-500 text-sm mt-1 ml-4",children:"Checking..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-normal",children:"Password"}),e.jsx("input",{type:"password",name:"password",required:!0,placeholder:"Your password",className:"w-full px-4 py-3 mt-1 rounded-[15px] border border-gray-300 text-sm",value:x??"",onChange: s=>{n(s.target.value),j(s.target.value)}}),e.jsx("input",{type:"password",required:!0,placeholder:"Confirm password",className:"w-full px-4 py-3 mt-3 rounded-[15px] border border-gray-300 text-sm",value:o,onChange: s=>w(s.target.value)}),h&&e.jsx("p",{className:"text-red-500 text-sm mt-1 ml-4",children:h}),!h&&r&&o&&!f&&e.jsx("p",{className:"text-red-500 text-sm mt-1 ml-4",children:"Passwords do not match."})]}),e.jsx("button",{type:"submit",disabled:!t||!f,className:`
                                w-full h-11 rounded-md font-bold text-sm transition
                                ${t&&f?"bg-amber-300 hover:bg-amber-400 active:bg-amber-200 text-white":"bg-gray-300 text-gray-500 cursor-not-allowed"}
                                `,onClick:v,children:"NEXT"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-gray-700 font-medium",children:["Already have an account?",e.jsx(b,{to:"/login",className:"text-amber-400 font-bold ml-1",children:"Sign In"})]})})]})})]})})}function L(){return e.jsx(e.Fragment,{children:e.jsx(D,{})})}const M=E(L);export{M as default};
