import{w as b}from "./with-props-JNWkkrjn.js";import{a as o,p as w}from "./chunk-D4RADZKF-DdSvw7tX.js";import{j as e}from "./jsx-runtime-D_zvdyIk.js";import{g as v,u as j}from "./inquiriesAPI-gt-yzMzF.js";import{I as N}from "./inquiry-AmjiLZEt.js";import{I as q}from "./inquiryLoading-DMYYepHY.js";import{S as c}from "./sweetalert2.esm.all-9Qm2jZ7z.js";/* empty css                   */import{u as g}from "./useTranslation-DnilsLqi.js";import{c as C}from "./createLucideIcon-Cyt6UY_L.js";import{u as S}from "./useInquiryMutation-D96ppYmq.js";import{B,F as k}from "./FloatingActionButtons-3zuONfQ9.js";import"./axiosInstance-CCaw23o5.js";import"./index-xsH4HHeE.js";import"./index-Druiat5n.js";import"./i18nInstance-CHFDjdcJ.js";import"./QueryClientProvider--V26__jT.js";import"./useMutation-iBKtBQ4J.js";import"./mutation-CruqbX-z.js";import"./removable-CGh8wCEh.js";/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],I=C("message-circle-plus",E);function T({onSubmit:i,userEmail:d,isLoading:p}){const{t:s}=g(),[a,f]=o.useState(""),[u,x]=o.useState("ACCOUNT"),[l,r]=o.useState(null),[n,m]=o.useState(!1),y=o.useRef(null);o.useEffect(()=>{const t=y.current;t&&(t.style.height="auto",t.style.height=`${t.scrollHeight}px`)},[a]);async function h(t){if(t.preventDefault(),!n){await c.fire({title:s("inquiry.agreeAlertTitle"),icon:"warning",confirmButtonText:s("confirm"),customClass:{popup:"custom-popup",title:"custom-title",actions:"custom-actions",confirmButton:"custom-confirm-button"}});return}await i({content:a,type:u,imgUrls:[]},l)}return p?e.jsx(q,{}):e.jsx("div",{className:"w-full max-w-2xl mx-auto px-4 bg-white rounded-2xl shadow pt-4 pb-6 relative space-y-4",children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4 mt-1.5",children:[e.jsx(I,{className:"text-yellow-500"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:s("inquiry.title")})]}),e.jsxs("div",{className:"bg-white border rounded-2xl shadow-md px-4 py-6 space-y-4 w-full sm:min-h-[50vh]",children:[e.jsx("select",{value:u,onChange:t=>x(t.target.value),className:"w-full border border-gray-300 p-3 rounded focus:outline-none focus:ring-2 focus:ring-yellow-400",children:N.map(t=>e.jsx("option",{value:t.value,children:s(`inquiry.types.${t.value}`)},t.value))}),e.jsx("textarea",{ref:y,value:a,onChange:t=>f(t.target.value),placeholder:s("inquiry.placeholder"),className:"w-full border border-gray-300 p-3 rounded resize-none focus:outline-none focus:ring-2 focus:ring-yellow-400 overflow-hidden leading-relaxed",rows:1,style:{minHeight:"300px"},required:!0}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-600 mb-1 block",children:s("inquiry.attachImages")}),e.jsx("input",{type:"file",multiple:!0,onChange:t=>r(t.target.files),className:`block text-sm text-gray-500 file:mr-4 file:py-2 file:px-4\r
                                       file:rounded-md file:border-0 file:text-sm file:font-semibold\r
                                       file:bg-yellow-500 file:text-white hover:file:bg-yellow-600 cursor-pointer`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1 font-semibold text-gray-700",children:s("inquiry.emailLabel")}),e.jsx("input",{type:"email",value:d,readOnly:!0,className:"w-full p-3 border border-gray-300 rounded bg-gray-100 cursor-not-allowed"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("label",{className:"inline-flex items-center space-x-2 cursor-pointer select-none text-sm font-normal",children:[e.jsx("input",{type:"checkbox",checked:n,onChange:t=>m(t.target.checked),className:"rounded border-gray-300 text-yellow-500 focus:ring-yellow-400",required:!0}),e.jsx("span",{children:s("inquiry.privacyAgreement")})]}),e.jsx("div",{className:"mt-2 w-full p-3 border border-gray-300 rounded bg-gray-100 text-gray-600 text-xs font-sans leading-relaxed whitespace-pre-line select-none",style:{userSelect:"none",pointerEvents:"none",boxShadow:"none"},children:s("inquiry.privacyNotice")})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsx("button",{type:"submit",disabled:!n,className:`w-full px-8 py-3 rounded-full font-semibold text-white transition 
                            ${n?"bg-yellow-500 hover:bg-yellow-600 cursor-pointer":"bg-gray-300 cursor-not-allowed"}`,children:s("inquiry.submit")})})]})})}function A(){const{t:i}=g(),d=w(),[p,s]=o.useState(!1),[a,f]=o.useState(null),u=S();o.useEffect(()=>{async function l(){s(!0);const r=await v();f(r),s(!1)}l()},[]);async function x(l,r){if(a){c.fire({title:i("inquiry.submitting"),allowOutsideClick:!1,allowEscapeKey:!1,didOpen:()=>c.showLoading(),customClass:{popup:"custom-popup",title:"custom-title",actions:"custom-actions",confirmButton:"custom-confirm-button"}});try{const m=(await u.mutateAsync(l)).data.inquiryId;r&&r.length>0&&await j(m,r),await c.fire({title:i("inquiry.submitSuccess"),icon:"success",confirmButtonText:i("confirmOKButtonText"),customClass:{popup:"custom-popup",title:"custom-title",actions:"custom-actions",confirmButton:"custom-confirm-button"}}),d(`/inquiries/${m}`,{replace:!0})}catch(n){console.error("Failed to submit inquiry",n),await c.fire({title:i("inquiry.submitFail"),icon:"error",confirmButtonText:i("confirmOKButtonText"),customClass:{popup:"custom-popup",title:"custom-title",actions:"custom-actions",confirmButton:"custom-confirm-button"}})}}}return e.jsxs("div",{children:[e.jsx(B,{}),e.jsx(k,{}),e.jsx(T,{onSubmit:x,userEmail:a??"",isLoading:p}),e.jsx("div",{className:"h-15"})]})}const ee=b(A);export{ee as default};
